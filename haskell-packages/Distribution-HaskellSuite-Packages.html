<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Distribution.HaskellSuite.Packages</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Distribution-HaskellSuite-Packages.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Distribution-HaskellSuite-Packages.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">haskell-packages-0.2: Haskell suite library for package management and integration with Cabal</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Distribution.HaskellSuite.Packages</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Querying package databases
</a></li><li><a href="#g:2">IsPackageDB class and friends
</a></li><li><a href="#g:3">StandardDB
</a></li><li><a href="#g:4">Relative paths in package databases
</a></li><li><a href="#g:5">Direct database manipulation
</a></li><li><a href="#g:6">Exceptions
</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Packages">Packages</a> = [<a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>]</li><li class="src short"><a href="#v:getInstalledPackages">getInstalledPackages</a> :: <span class="keyword">forall</span> db. <a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a> db =&gt; <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Proxy.html#t:Proxy">Proxy</a> db -&gt; <a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a></li><li class="src short"><a href="#v:readPackagesInfo">readPackagesInfo</a> :: <a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a> db =&gt; <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Proxy.html#t:Proxy">Proxy</a> db -&gt; [<a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a>] -&gt; [<a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a></li><li class="src short"><span class="keyword">class</span>  <a href="#t:IsPackageDB">IsPackageDB</a> db  <span class="keyword">where</span><ul class="subs"><li><a href="#v:dbName">dbName</a> :: <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Tagged.html#t:Tagged">Tagged</a> db <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li><li><a href="#v:readPackageDB">readPackageDB</a> :: <a href="Distribution-HaskellSuite-Packages.html#t:MaybeInitDB">MaybeInitDB</a> -&gt; db -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a></li><li><a href="#v:writePackageDB">writePackageDB</a> :: db -&gt; <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:globalDB">globalDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> db)</li><li><a href="#v:dbFromPath">dbFromPath</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> db</li><li><a href="#v:locateDB">locateDB</a> :: <a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> db)</li><li><a href="#v:userDB">userDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> db</li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:MaybeInitDB">MaybeInitDB</a> <ul class="subs"><li>= <a href="#v:InitDB">InitDB</a>  </li><li>| <a href="#v:Don-39-tInitDB">Don'tInitDB</a>  </li></ul></li><li class="src short"><a href="#v:maybeInitDB">maybeInitDB</a> :: <a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="Distribution-HaskellSuite-Packages.html#t:MaybeInitDB">MaybeInitDB</a></li><li class="src short"><span class="keyword">data</span>  <a href="#t:StandardDB">StandardDB</a> name = <a href="#v:StandardDB">StandardDB</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a></li><li class="src short"><span class="keyword">class</span>  <a href="#t:IsDBName">IsDBName</a> name  <span class="keyword">where</span><ul class="subs"><li><a href="#v:getDBName">getDBName</a> :: <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Tagged.html#t:Tagged">Tagged</a> name <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a></li></ul></li><li class="src short"><a href="#v:makePkgInfoRelative">makePkgInfoRelative</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><a href="#v:makePkgInfoAbsolute">makePkgInfoAbsolute</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><a href="#v:mapPaths">mapPaths</a> :: (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a>) -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a></li><li class="src short"><a href="#v:writeDB">writeDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:readDB">readDB</a> :: <a href="Distribution-HaskellSuite-Packages.html#t:MaybeInitDB">MaybeInitDB</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a></li><li class="src short"><a href="#v:initDB">initDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span>  <a href="#t:PkgDBError">PkgDBError</a> <ul class="subs"><li>= <a href="#v:BadPkgDB">BadPkgDB</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a>  </li><li>| <a href="#v:PkgDBReadError">PkgDBReadError</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Exception-Base.html#t:IOException">IOException</a>  </li><li>| <a href="#v:PkgExists">PkgExists</a> <a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a>  </li><li>| <a href="#v:RegisterNullDB">RegisterNullDB</a>  </li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:PkgInfoError">PkgInfoError</a>  = <a href="#v:PkgInfoNotFound">PkgInfoNotFound</a> <a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a></li></ul></div><div id="interface"><h1 id="g:1">Querying package databases
</h1><div class="doc"><p><code><a href="Distribution-HaskellSuite-Packages.html#v:getInstalledPackages">getInstalledPackages</a></code> and <code><a href="Distribution-HaskellSuite-Packages.html#v:readPackagesInfo">readPackagesInfo</a></code> can be used to get
 package information from package databases.
</p><p>They use the <code><a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a></code> interface, so that you can use them with
 your own, custom databases.
</p><p>Use <code><a href="Distribution-HaskellSuite-Packages.html#v:getInstalledPackages">getInstalledPackages</a></code> to get all packages defined in a particular
 database, and <code><a href="Distribution-HaskellSuite-Packages.html#v:readPackagesInfo">readPackagesInfo</a></code> when you're searching for
 a particular set of packages in a set of databases.
</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Packages" class="def">Packages</a> = [<a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a>]<a href="src/Distribution-HaskellSuite-Packages.html#Packages" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getInstalledPackages" class="def">getInstalledPackages</a> :: <span class="keyword">forall</span> db. <a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a> db =&gt; <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Proxy.html#t:Proxy">Proxy</a> db -&gt; <a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a><a href="src/Distribution-HaskellSuite-Packages.html#getInstalledPackages" class="link">Source</a></p><div class="doc"><p>Get all packages that are registered in a particular database
</p><p>If the database doesn't exist, the behaviour is determined by
 <code><a href="Distribution-HaskellSuite-Packages.html#v:maybeInitDB">maybeInitDB</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:readPackagesInfo" class="def">readPackagesInfo</a> :: <a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a> db =&gt; <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Proxy.html#t:Proxy">Proxy</a> db -&gt; [<a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a>] -&gt; [<a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a>] -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a><a href="src/Distribution-HaskellSuite-Packages.html#readPackagesInfo" class="link">Source</a></p><div class="doc"><p>Try to retrieve an <code>InstalledPackageInfo</code> for each of
 <code><a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a></code>s from a specified set of <code><a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a></code>s.
</p><p>May throw a <code><a href="Distribution-HaskellSuite-Packages.html#v:PkgInfoNotFound">PkgInfoNotFound</a></code> exception.
</p><p>If a database doesn't exist, the behaviour is determined by
 <code><a href="Distribution-HaskellSuite-Packages.html#v:maybeInitDB">maybeInitDB</a></code>.
</p></div></div><h1 id="g:2">IsPackageDB class and friends
</h1><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:IsPackageDB" class="def">IsPackageDB</a> db  <span class="keyword">where</span><a href="src/Distribution-HaskellSuite-Packages.html#IsPackageDB" class="link">Source</a></p><div class="doc"><p>Package database class.
</p><p><code>db</code> will typically be a newtype-wrapped path to the database file,
 although more sophisticated setups are certainly possible.
</p><p>Consider using <code><a href="Distribution-HaskellSuite-Packages.html#t:StandardDB">StandardDB</a></code> first, and implement your own database
 type if that isn't enough.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:dbName" class="def">dbName</a> :: <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Tagged.html#t:Tagged">Tagged</a> db <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a><a href="src/Distribution-HaskellSuite-Packages.html#dbName" class="link">Source</a></p><div class="doc"><p>The name of the database. Used to construct some paths.
</p></div><p class="src"><a name="v:readPackageDB" class="def">readPackageDB</a> :: <a href="Distribution-HaskellSuite-Packages.html#t:MaybeInitDB">MaybeInitDB</a> -&gt; db -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a><a href="src/Distribution-HaskellSuite-Packages.html#readPackageDB" class="link">Source</a></p><div class="doc"><p>Read a package database.
</p><p>If the database does not exist, then the first argument tells whether
 we should create and initialize it with an empty package list. In
 that case, if <code><a href="Distribution-HaskellSuite-Packages.html#v:Don-39-tInitDB">Don'tInitDB</a></code> is specified, a <code>BadPkgDb</code> exception is
 thrown.
</p></div><p class="src"><a name="v:writePackageDB" class="def">writePackageDB</a> :: db -&gt; <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> ()<a href="src/Distribution-HaskellSuite-Packages.html#writePackageDB" class="link">Source</a></p><div class="doc"><p>Write a package database
</p></div><p class="src"><a name="v:globalDB" class="def">globalDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> db)<a href="src/Distribution-HaskellSuite-Packages.html#globalDB" class="link">Source</a></p><div class="doc"><p>Get the location of a global package database (if there's one)
</p></div><p class="src"><a name="v:dbFromPath" class="def">dbFromPath</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> db<a href="src/Distribution-HaskellSuite-Packages.html#dbFromPath" class="link">Source</a></p><div class="doc"><p>Create a db object given a database file path
</p></div><p class="src"><a name="v:locateDB" class="def">locateDB</a> :: <a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Maybe.html#t:Maybe">Maybe</a> db)<a href="src/Distribution-HaskellSuite-Packages.html#locateDB" class="link">Source</a></p><div class="doc"><p>Convert a package db specification to a db object
</p></div><p class="src"><a name="v:userDB" class="def">userDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> db<a href="src/Distribution-HaskellSuite-Packages.html#userDB" class="link">Source</a></p><div class="doc"><p>The user database
</p></div></div><div class="subs instances"><p id="control.i:IsPackageDB" class="caption collapser" onclick="toggleSection('i:IsPackageDB')">Instances</p><div id="section.i:IsPackageDB" class="show"><table><tr><td class="src"><a href="Distribution-HaskellSuite-Packages.html#t:IsDBName">IsDBName</a> name =&gt; <a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a> (<a href="Distribution-HaskellSuite-Packages.html#t:StandardDB">StandardDB</a> name)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:MaybeInitDB" class="def">MaybeInitDB</a>  <a href="src/Distribution-HaskellSuite-Packages.html#MaybeInitDB" class="link">Source</a></p><div class="doc"><p>A flag which tells whether the library should create an empty package
 database if it doesn't exist yet
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:InitDB" class="def">InitDB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:Don-39-tInitDB" class="def">Don'tInitDB</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:maybeInitDB" class="def">maybeInitDB</a> :: <a href="../Cabal/Distribution-Simple-Compiler.html#t:PackageDB">PackageDB</a> -&gt; <a href="Distribution-HaskellSuite-Packages.html#t:MaybeInitDB">MaybeInitDB</a><a href="src/Distribution-HaskellSuite-Packages.html#maybeInitDB" class="link">Source</a></p><div class="doc"><p>This function determines whether a package database should be
 initialized if it doesn't exist yet.
</p><p>The rule is this: if it is a global or a user database, then initialize
 it; otherwise, don't.
</p><p>Rationale: if the database was specified by the user, she could have
 made a mistake in the path, and we'd rather report it. On the other
 hand, it is our responsibility to ensure that the user and global
 databases exist.
</p></div></div><h1 id="g:3">StandardDB
</h1><div class="doc"><p><code><a href="Distribution-HaskellSuite-Packages.html#t:StandardDB">StandardDB</a></code> is a simple <code><a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a></code> implementation which cover many
 (but not all) use cases. Please see the source code to see what
 assumptions it makes and whether they hold for your use case.
</p></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:StandardDB" class="def">StandardDB</a> name <a href="src/Distribution-HaskellSuite-Packages.html#StandardDB" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:StandardDB" class="def">StandardDB</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:StandardDB" class="caption collapser" onclick="toggleSection('i:StandardDB')">Instances</p><div id="section.i:StandardDB" class="show"><table><tr><td class="src"><a href="Distribution-HaskellSuite-Packages.html#t:IsDBName">IsDBName</a> name =&gt; <a href="Distribution-HaskellSuite-Packages.html#t:IsPackageDB">IsPackageDB</a> (<a href="Distribution-HaskellSuite-Packages.html#t:StandardDB">StandardDB</a> name)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:IsDBName" class="def">IsDBName</a> name  <span class="keyword">where</span><a href="src/Distribution-HaskellSuite-Packages.html#IsDBName" class="link">Source</a></p><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:getDBName" class="def">getDBName</a> :: <a href="http://hackage.haskell.org/packages/archive/tagged/0.6/doc/html/Data-Tagged.html#t:Tagged">Tagged</a> name <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-String.html#t:String">String</a><a href="src/Distribution-HaskellSuite-Packages.html#getDBName" class="link">Source</a></p></div></div><h1 id="g:4">Relative paths in package databases
</h1><div class="doc"><p>Traditionally, the paths in package databases are absolute.
</p><p>haskell-packages allows relative file paths in databases, which is
 useful in some cases (e.g. relocatable global package database).
</p><p>By default, <code><a href="Distribution-HaskellSuite-Packages.html#v:readPackageDB">readPackageDB</a></code> (for <code><a href="Distribution-HaskellSuite-Packages.html#t:StandardDB">StandardDB</a></code>) treats relative paths
 as being relative to the database path.
</p><p>However, Cabal still passes absolute file names, and by default
 <code><a href="Distribution-HaskellSuite-Packages.html#v:writePackageDB">writePackageDB</a></code> stores them verbatim. To change this, use
 <code><a href="Distribution-HaskellSuite-Packages.html#v:makePkgInfoRelative">makePkgInfoRelative</a></code> in your implementation of <code><a href="Distribution-HaskellSuite-Packages.html#v:writePackageDB">writePackageDB</a></code>.
</p></div><div class="top"><p class="src"><a name="v:makePkgInfoRelative" class="def">makePkgInfoRelative</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a><a href="src/Distribution-HaskellSuite-Packages.html#makePkgInfoRelative" class="link">Source</a></p><div class="doc"><p>Make all paths in the package info relative to the given base
 directory.
</p></div></div><div class="top"><p class="src"><a name="v:makePkgInfoAbsolute" class="def">makePkgInfoAbsolute</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a><a href="src/Distribution-HaskellSuite-Packages.html#makePkgInfoAbsolute" class="link">Source</a></p><div class="doc"><p>Make all relative paths in the package info absolute, interpreting
 them relative to the given base directory.
</p></div></div><div class="top"><p class="src"><a name="v:mapPaths" class="def">mapPaths</a> :: (<a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a>) -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a> -&gt; <a href="../Cabal/Distribution-InstalledPackageInfo.html#t:InstalledPackageInfo">InstalledPackageInfo</a><a href="src/Distribution-HaskellSuite-Packages.html#mapPaths" class="link">Source</a></p><div class="doc"><p>Apply a given function to all file paths contained in the package info
</p></div></div><h1 id="g:5">Direct database manipulation
</h1><div class="doc"><p><code><a href="Distribution-HaskellSuite-Packages.html#v:writeDB">writeDB</a></code> and <code><a href="Distribution-HaskellSuite-Packages.html#v:readDB">readDB</a></code> perform (de)serialization of a package
 database using a simple JSON encoding. You may use these to implement
 <code><a href="Distribution-HaskellSuite-Packages.html#v:writePackageDB">writePackageDB</a></code> and <code><a href="Distribution-HaskellSuite-Packages.html#v:readPackageDB">readPackageDB</a></code> for your own databases.
</p></div><div class="top"><p class="src"><a name="v:writeDB" class="def">writeDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> ()<a href="src/Distribution-HaskellSuite-Packages.html#writeDB" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:readDB" class="def">readDB</a> :: <a href="Distribution-HaskellSuite-Packages.html#t:MaybeInitDB">MaybeInitDB</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> <a href="Distribution-HaskellSuite-Packages.html#t:Packages">Packages</a><a href="src/Distribution-HaskellSuite-Packages.html#readDB" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:initDB" class="def">initDB</a> :: <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:IO">IO</a> ()<a href="src/Distribution-HaskellSuite-Packages.html#initDB" class="link">Source</a></p><div class="doc"><p>If the path does not exist, create an empty database there. Otherwise,
 do nothing.
</p></div></div><h1 id="g:6">Exceptions
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:PkgDBError" class="def">PkgDBError</a>  <a href="src/Distribution-HaskellSuite-Packages.html#PkgDBError" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:BadPkgDB" class="def">BadPkgDB</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>package database could not be parsed or contains errors
</p></td></tr><tr><td class="src"><a name="v:PkgDBReadError" class="def">PkgDBReadError</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/System-IO.html#t:FilePath">FilePath</a> <a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Exception-Base.html#t:IOException">IOException</a></td><td class="doc"><p>package db file could not be read
</p></td></tr><tr><td class="src"><a name="v:PkgExists" class="def">PkgExists</a> <a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a></td><td class="doc"><p>attempt to register an already present package id
</p></td></tr><tr><td class="src"><a name="v:RegisterNullDB" class="def">RegisterNullDB</a></td><td class="doc"><p>attempt to register in the global db when it's not present
</p></td></tr></table></div><div class="subs instances"><p id="control.i:PkgDBError" class="caption collapser" onclick="toggleSection('i:PkgDBError')">Instances</p><div id="section.i:PkgDBError" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Text-Show.html#t:Show">Show</a> <a href="Distribution-HaskellSuite-Packages.html#t:PkgDBError">PkgDBError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Distribution-HaskellSuite-Packages.html#t:PkgDBError">PkgDBError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Distribution-HaskellSuite-Packages.html#t:PkgDBError">PkgDBError</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:PkgInfoError" class="def">PkgInfoError</a>  <a href="src/Distribution-HaskellSuite-Packages.html#PkgInfoError" class="link">Source</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:PkgInfoNotFound" class="def">PkgInfoNotFound</a> <a href="../Cabal/Distribution-Package.html#t:InstalledPackageId">InstalledPackageId</a></td><td class="doc"><p>requested package id could not be found in any of the package databases
</p></td></tr></table></div><div class="subs instances"><p id="control.i:PkgInfoError" class="caption collapser" onclick="toggleSection('i:PkgInfoError')">Instances</p><div id="section.i:PkgInfoError" class="show"><table><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Text-Show.html#t:Show">Show</a> <a href="Distribution-HaskellSuite-Packages.html#t:PkgInfoError">PkgInfoError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Data-Typeable-Internal.html#t:Typeable">Typeable</a> <a href="Distribution-HaskellSuite-Packages.html#t:PkgInfoError">PkgInfoError</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="http://hackage.haskell.org/packages/archive/base/4.6.0.1/doc/html/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Distribution-HaskellSuite-Packages.html#t:PkgInfoError">PkgInfoError</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>